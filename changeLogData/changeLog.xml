<?xml version="1.0" encoding="UTF-8"?> 
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <preConditions>
          <dbms type="oracle" />
          <runningAs username="WQP_CORE" />
    </preConditions>

    <changeSet author="drsteini" id="loadDataSource" runOnChange="true">
        <delete tableName="data_source"/>
        <loadData encoding="UTF-8"
                  file="data_source.csv"
                  relativeToChangelogFile="true"
                  tableName="data_source">
        </loadData>
        <rollback>select 'no rollback - you must restore previous csv and rerun manually' from dual</rollback>
    </changeSet>

    <changeSet author="drsteini" id="loadWqxHrdatToSrid" runOnChange="true">
        <delete tableName="wqx_hrdat_to_srid"/>
        <loadData encoding="UTF-8"
                  file="wqx_hrdat_to_srid.csv"
                  relativeToChangelogFile="true"
                  tableName="wqx_hrdat_to_srid">
        </loadData>
        <rollback>select 'no rollback - you must restore previous csv and rerun manually' from dual</rollback>
    </changeSet>

    <changeSet author="drsteini" id="loadWqxSiteTypeConversion" runOnChange="true">
        <delete tableName="wqx_site_type_conversion"/>
        <loadData encoding="UTF-8"
                  file="wqx_site_type_conversion.csv"
                  relativeToChangelogFile="true"
                  tableName="wqx_site_type_conversion">
        </loadData>
        <rollback>select 'no rollback - you must restore previous csv and rerun manually' from dual</rollback>
    </changeSet>

    <changeSet author="drsteini" id="loadEtlThreshold" runOnChange="true">
        <delete tableName="etl_threshold"/>
        <loadData encoding="UTF-8"
                  file="etl_threshold.csv"
                  relativeToChangelogFile="true"
                  tableName="etl_threshold">
        </loadData>
        <rollback>select 'no rollback - you must restore previous csv and rerun manually' from dual</rollback>
    </changeSet>

    <include file="geospatial_from_dbdw.sql" relativeToChangelogFile="true"/>

    <changeSet author="drsteini" id="load-wqx_dql_hierarchy" runOnChange="true">
        <delete tableName="wqx_dql_hierarchy"/>
        <loadData encoding="UTF-8"
                  file="wqx_dql_hierarchy.csv"
                  relativeToChangelogFile="true"
                  tableName="wqx_dql_hierarchy">
        </loadData>
        <rollback>select 'no rollback - you must restore previous csv and rerun manually' from dual</rollback>
    </changeSet>

</databaseChangeLog>